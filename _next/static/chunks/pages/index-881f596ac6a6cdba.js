(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5557:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return s(7030)}])},2602:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var s in t)Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}(t,{default:function(){return n},noSSR:function(){return i}});let a=s(8754);s(5893),s(7294);let r=a._(s(5491));function l(e){return{default:(null==e?void 0:e.default)||e}}function i(e,t){return delete t.webpack,delete t.modules,e(t)}function n(e,t){let s=r.default,a={loading:e=>{let{error:t,isLoading:s,pastDelay:a}=e;return null}};e instanceof Promise?a.loader=()=>e:"function"==typeof e?a.loader=e:"object"==typeof e&&(a={...a,...e});let n=(a={...a,...t}).loader;return(a.loadableGenerated&&(a={...a,...a.loadableGenerated},delete a.loadableGenerated),"boolean"!=typeof a.ssr||a.ssr)?s({...a,loader:()=>null!=n?n().then(l):Promise.resolve(l(()=>null))}):(delete a.webpack,delete a.modules,i(s,a))}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},1159:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"LoadableContext",{enumerable:!0,get:function(){return a}});let a=s(8754)._(s(7294)).default.createContext(null)},5491:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return x}});let a=s(8754)._(s(7294)),r=s(1159),l=[],i=[],n=!1;function o(e){let t=e(),s={loading:!0,loaded:null,error:null};return s.promise=t.then(e=>(s.loading=!1,s.loaded=e,e)).catch(e=>{throw s.loading=!1,s.error=e,e}),s}class c{promise(){return this._res.promise}retry(){this._clearTimeouts(),this._res=this._loadFn(this._opts.loader),this._state={pastDelay:!1,timedOut:!1};let{_res:e,_opts:t}=this;e.loading&&("number"==typeof t.delay&&(0===t.delay?this._state.pastDelay=!0:this._delay=setTimeout(()=>{this._update({pastDelay:!0})},t.delay)),"number"==typeof t.timeout&&(this._timeout=setTimeout(()=>{this._update({timedOut:!0})},t.timeout))),this._res.promise.then(()=>{this._update({}),this._clearTimeouts()}).catch(e=>{this._update({}),this._clearTimeouts()}),this._update({})}_update(e){this._state={...this._state,error:this._res.error,loaded:this._res.loaded,loading:this._res.loading,...e},this._callbacks.forEach(e=>e())}_clearTimeouts(){clearTimeout(this._delay),clearTimeout(this._timeout)}getCurrentValue(){return this._state}subscribe(e){return this._callbacks.add(e),()=>{this._callbacks.delete(e)}}constructor(e,t){this._loadFn=e,this._opts=t,this._callbacks=new Set,this._delay=null,this._timeout=null,this.retry()}}function m(e){return function(e,t){let s=Object.assign({loader:null,loading:null,delay:200,timeout:null,webpack:null,modules:null},t),l=null;function o(){if(!l){let t=new c(e,s);l={getCurrentValue:t.getCurrentValue.bind(t),subscribe:t.subscribe.bind(t),retry:t.retry.bind(t),promise:t.promise.bind(t)}}return l.promise()}if(!n){let e=s.webpack?s.webpack():s.modules;e&&i.push(t=>{for(let s of e)if(t.includes(s))return o()})}function m(e,t){!function(){o();let e=a.default.useContext(r.LoadableContext);e&&Array.isArray(s.modules)&&s.modules.forEach(t=>{e(t)})}();let i=a.default.useSyncExternalStore(l.subscribe,l.getCurrentValue,l.getCurrentValue);return a.default.useImperativeHandle(t,()=>({retry:l.retry}),[]),a.default.useMemo(()=>{var t;return i.loading||i.error?a.default.createElement(s.loading,{isLoading:i.loading,pastDelay:i.pastDelay,timedOut:i.timedOut,error:i.error,retry:l.retry}):i.loaded?a.default.createElement((t=i.loaded)&&t.default?t.default:t,e):null},[e,i])}return m.preload=()=>o(),m.displayName="LoadableComponent",a.default.forwardRef(m)}(o,e)}function d(e,t){let s=[];for(;e.length;){let a=e.pop();s.push(a(t))}return Promise.all(s).then(()=>{if(e.length)return d(e,t)})}m.preloadAll=()=>new Promise((e,t)=>{d(l).then(e,t)}),m.preloadReady=e=>(void 0===e&&(e=[]),new Promise(t=>{let s=()=>(n=!0,t());d(i,e).then(s,s)})),window.__NEXT_PRELOADREADY=m.preloadReady;let x=m},1959:function(e,t,s){"use strict";s.d(t,{Z:function(){return o}});var a=s(5893),r=s(1664),l=s.n(r),i=s(5675),n=s.n(i);function o(){let e=new Date().getFullYear();return(0,a.jsx)("footer",{className:"w-full bg-gray-100 py-8 shadow-inner",children:(0,a.jsxs)("div",{className:"container max-w-3xl mx-auto px-4",children:[(0,a.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-center mb-6",children:[(0,a.jsxs)("div",{className:"mb-4 md:mb-0",children:[(0,a.jsxs)(l(),{href:"/",className:"flex items-center",children:[(0,a.jsx)(n(),{src:"/favicon.svg",alt:"视频转换宝",width:32,height:32,className:"mr-2"}),(0,a.jsx)("span",{className:"text-primary font-bold text-lg",children:"视频转换宝"})]}),(0,a.jsx)("p",{className:"text-gray-600 text-sm mt-1",children:"免费的视频转GIF动图、实况照片(LIVP)工具"})]}),(0,a.jsxs)("div",{className:"flex flex-wrap justify-center gap-6",children:[(0,a.jsxs)(l(),{href:"/privacy",className:"flex items-center text-indigo-600 hover:text-indigo-800 text-sm transition-colors",children:[(0,a.jsx)("i",{className:"fas fa-shield-alt mr-2 text-indigo-500"}),"隐私政策"]}),(0,a.jsxs)(l(),{href:"/terms",className:"flex items-center text-purple-600 hover:text-purple-800 text-sm transition-colors",children:[(0,a.jsx)("i",{className:"fas fa-file-contract mr-2 text-purple-500"}),"使用条款"]})]})]}),(0,a.jsx)("div",{className:"border-t border-gray-200 pt-4",children:(0,a.jsxs)("p",{className:"text-gray-500 text-sm text-center",children:["Copyright © 2004-01-11 luhui.net all rights reserved."]})})]})})}},5577:function(e,t,s){"use strict";s.d(t,{Z:function(){return c}});var a=s(5893),r=s(1664),l=s.n(r),i=s(7294),n=s(5675),o=s.n(n);function c(){let[e,t]=(0,i.useState)(!1);return(0,a.jsxs)("nav",{className:"w-full bg-gradient-to-r from-primary to-primary-dark shadow-md",children:[(0,a.jsx)("div",{className:"container max-w-6xl mx-auto px-4",children:(0,a.jsxs)("div",{className:"flex justify-between h-16",children:[(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsxs)(l(),{href:"/",className:"flex items-center",children:[(0,a.jsx)(o(),{src:"/favicon.svg",alt:"视频转换宝",width:36,height:36,className:"mr-2"}),(0,a.jsx)("span",{className:"text-white font-bold text-xl",children:"视频转换宝"})]})}),(0,a.jsxs)("div",{className:"hidden md:flex items-center space-x-6",children:[(0,a.jsxs)(l(),{href:"/",className:"flex items-center text-white hover:text-blue-200 px-3 py-2 rounded-md text-sm font-medium transition-colors",children:[(0,a.jsx)("i",{className:"fas fa-home mr-2 text-blue-200"}),"首页"]}),(0,a.jsxs)(l(),{href:"/guide",className:"flex items-center text-white hover:text-green-200 px-3 py-2 rounded-md text-sm font-medium transition-colors",children:[(0,a.jsx)("i",{className:"fas fa-book-open mr-2 text-green-200"}),"使用指南"]}),(0,a.jsxs)(l(),{href:"/about",className:"flex items-center text-white hover:text-yellow-200 px-3 py-2 rounded-md text-sm font-medium transition-colors",children:[(0,a.jsx)("i",{className:"fas fa-info-circle mr-2 text-yellow-200"}),"关于我们"]})]}),(0,a.jsx)("div",{className:"md:hidden flex items-center",children:(0,a.jsx)("button",{onClick:()=>t(!e),className:"text-white hover:text-secondary focus:outline-none",children:(0,a.jsx)("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e?(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}):(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})})]})}),e&&(0,a.jsx)("div",{className:"md:hidden bg-primary-dark",children:(0,a.jsxs)("div",{className:"px-2 pt-2 pb-3 space-y-1 sm:px-3",children:[(0,a.jsxs)(l(),{href:"/",className:"flex items-center text-white hover:text-blue-200 block px-3 py-2 rounded-md text-base font-medium",children:[(0,a.jsx)("i",{className:"fas fa-home mr-2 text-blue-200"}),"首页"]}),(0,a.jsxs)(l(),{href:"/guide",className:"flex items-center text-white hover:text-green-200 block px-3 py-2 rounded-md text-base font-medium",children:[(0,a.jsx)("i",{className:"fas fa-book-open mr-2 text-green-200"}),"使用指南"]}),(0,a.jsxs)(l(),{href:"/about",className:"flex items-center text-white hover:text-yellow-200 block px-3 py-2 rounded-md text-base font-medium",children:[(0,a.jsx)("i",{className:"fas fa-info-circle mr-2 text-yellow-200"}),"关于我们"]})]})})]})}},7030:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return T}});var a=s(5893),r=s(7294),l=s(9008),i=s.n(l);function n(){return(0,a.jsxs)("div",{className:"text-center mb-8",children:[(0,a.jsx)("h1",{className:"text-3xl md:text-4xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-primary to-purple-600 mb-3",children:"视频转换宝"}),(0,a.jsxs)("p",{className:"text-gray-600 max-w-xl mx-auto",children:[(0,a.jsx)("i",{className:"fas fa-magic text-primary-light mr-2"}),"简单、快速地将视频转换为 GIF 动图、实况照片(LIVP)、MP4 或 WebM 格式"]}),(0,a.jsxs)("div",{className:"flex justify-center space-x-4 mt-4",children:[(0,a.jsxs)("div",{className:"flex items-center text-sm text-gray-500",children:[(0,a.jsx)("i",{className:"fas fa-bolt text-yellow-500 mr-1"}),(0,a.jsx)("span",{children:"快速处理"})]}),(0,a.jsxs)("div",{className:"flex items-center text-sm text-gray-500",children:[(0,a.jsx)("i",{className:"fas fa-lock text-green-500 mr-1"}),(0,a.jsx)("span",{children:"隐私保护"})]}),(0,a.jsxs)("div",{className:"flex items-center text-sm text-gray-500",children:[(0,a.jsx)("i",{className:"fas fa-cloud-upload-alt text-blue-500 mr-1"}),(0,a.jsx)("span",{children:"无需安装"})]})]})]})}var o=s(1959);function c(e){let{onFileUpload:t,multiple:s=!1}=e,l=(0,r.useRef)(null);return(0,a.jsxs)("div",{className:"border-2 border-dashed border-primary-light rounded-lg p-8 text-center cursor-pointer mb-6 transition-all hover:bg-secondary-light",onClick:()=>{l.current.click()},onDrop:e=>{if(e.preventDefault(),e.dataTransfer.files.length>0){if(s){let s=Array.from(e.dataTransfer.files).filter(e=>e.type.startsWith("video/"));s.length>0&&t(s)}else e.dataTransfer.files[0].type.startsWith("video/")&&t(e.dataTransfer.files[0])}},onDragOver:e=>{e.preventDefault()},children:[(0,a.jsx)("i",{className:"fas fa-file-upload text-4xl text-primary mb-3"}),(0,a.jsxs)("p",{className:"text-primary font-medium mb-1",children:["点击或拖放视频文件",s?" (可多选)":""]}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"支持MP4, MOV, AVI等常见视频格式"}),s&&(0,a.jsxs)("p",{className:"text-xs text-primary-dark mt-2",children:[(0,a.jsx)("i",{className:"fas fa-info-circle mr-1"}),"批量模式：所有视频将使用相同的转换设置"]}),(0,a.jsx)("input",{type:"file",ref:l,accept:"video/*",className:"hidden",onChange:e=>{e.target.files.length>0&&(s?t(Array.from(e.target.files)):t(e.target.files[0]))},multiple:s})]})}function m(e){let{fileSize:t}=e,s=t/1048576;return s<100?null:s>=1024?(0,a.jsx)("div",{className:"my-3 p-3 bg-red-50 border border-red-200 rounded-md",children:(0,a.jsxs)("div",{className:"flex items-start",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("i",{className:"fas fa-exclamation-triangle text-red-500"})}),(0,a.jsxs)("div",{className:"ml-3",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-red-800",children:"超大文件警告"}),(0,a.jsxs)("div",{className:"mt-1 text-sm text-red-700",children:[(0,a.jsxs)("p",{children:["您上传的视频超过 1GB (",s.toFixed(1)," MB)，这可能导致:"]}),(0,a.jsxs)("ul",{className:"list-disc pl-5 mt-1 space-y-1",children:[(0,a.jsx)("li",{children:"浏览器崩溃或性能严重下降"}),(0,a.jsx)("li",{children:"转换过程极其缓慢"}),(0,a.jsx)("li",{children:"内存不足错误"})]}),(0,a.jsx)("p",{className:"mt-2 font-medium",children:"建议:"}),(0,a.jsxs)("ul",{className:"list-disc pl-5 mt-1",children:[(0,a.jsx)("li",{children:"选择较短的视频片段"}),(0,a.jsx)("li",{children:"使用视频编辑软件预先剪辑视频"}),(0,a.jsx)("li",{children:"降低视频分辨率后再上传"})]})]})]})]})}):s>=200?(0,a.jsx)("div",{className:"my-3 p-3 bg-yellow-50 border border-yellow-200 rounded-md",children:(0,a.jsxs)("div",{className:"flex items-start",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("i",{className:"fas fa-info-circle text-yellow-600"})}),(0,a.jsxs)("div",{className:"ml-3",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-yellow-800",children:"大文件提示"}),(0,a.jsxs)("div",{className:"mt-1 text-sm text-yellow-700",children:[(0,a.jsxs)("p",{children:["您上传的视频较大 (",s.toFixed(1)," MB)，转换过程可能需要较长时间。"]}),(0,a.jsx)("p",{className:"mt-1",children:"转换速度取决于您的设备性能和浏览器。请耐心等待，避免切换页面或关闭浏览器。"})]})]})]})}):(0,a.jsx)("div",{className:"my-3 p-3 bg-blue-50 border border-blue-200 rounded-md",children:(0,a.jsxs)("div",{className:"flex items-start",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("i",{className:"fas fa-info-circle text-blue-500"})}),(0,a.jsxs)("div",{className:"ml-3",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-blue-800",children:"文件大小提示"}),(0,a.jsxs)("div",{className:"mt-1 text-sm text-blue-700",children:[(0,a.jsxs)("p",{children:["您上传的视频大小为 ",s.toFixed(1)," MB，转换可能需要一些时间。"]}),(0,a.jsx)("p",{className:"mt-1",children:"在线转换较大的文件可能会比本地软件慢一些，请耐心等待。"})]})]})]})})}function d(e){let{url:t,file:s,onSelectFile:r,selectedFileIndex:l,batchMode:i,videoFiles:n,videoDuration:o}=e,c=s?s.size:0;return(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsxs)("h2",{className:"section-title",children:[(0,a.jsx)("i",{className:"fas fa-play-circle"})," 视频预览"]}),(0,a.jsxs)("div",{className:"bg-secondary-light rounded-lg p-4",children:[(0,a.jsx)("div",{className:"relative aspect-video bg-gray-800 rounded-lg overflow-hidden mb-4",children:t?(0,a.jsx)("video",{src:t,controls:!0,className:"absolute inset-0 w-full h-full"}):(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center text-white text-opacity-70",children:(0,a.jsx)("p",{children:"请上传视频文件"})})}),s&&(0,a.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center",children:[(0,a.jsxs)("div",{className:"mb-2 md:mb-0",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate max-w-md",children:s.name}),(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:[(s.size/1048576).toFixed(2)," MB • ",s.type||"未知类型",o&&(0,a.jsxs)("span",{children:[" • 时长: ",o?"".concat(Math.floor(o/60),":").concat((o%60).toString().padStart(2,"0")):"未知"]})]})]}),i&&n.length>1&&(0,a.jsx)("select",{value:l,onChange:e=>r(parseInt(e.target.value)),className:"mt-2 md:mt-0 p-1.5 border border-gray-300 rounded-md text-sm",children:n.map((e,t)=>(0,a.jsxs)("option",{value:t,children:[t+1,". ",e.name.length>20?e.name.substring(0,20)+"...":e.name]},t))})]}),s&&(0,a.jsx)(m,{fileSize:c})]})]})}function x(e){let{settings:t,showAdvanced:s,onSettingChange:r,onToggleAdvanced:l}=e,i=t.originalResolution||"未知",n=t.videoDuration||30,o=Math.max(0,n-1),c=Math.max(1,n-t.startTime);return(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,a.jsxs)("h2",{className:"text-lg font-semibold text-gray-800 flex items-center",children:[(0,a.jsx)("i",{className:"fas fa-sliders-h text-primary mr-2"})," 转换设置"]}),(0,a.jsxs)("button",{className:"flex items-center text-primary text-sm bg-transparent border-none cursor-pointer hover:text-primary-dark transition-colors",onClick:l,children:[(0,a.jsx)("i",{className:"fas ".concat(s?"fa-chevron-up":"fa-chevron-down"," mr-1")}),s?"隐藏高级设置":"显示高级设置"]})]}),(0,a.jsxs)("div",{className:"bg-blue-50 rounded-lg p-5 border border-blue-100 shadow-sm",children:[(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsxs)("label",{className:"text-sm font-medium text-gray-700 mb-2 flex items-center",children:[(0,a.jsx)("i",{className:"fas fa-file-export text-indigo-500 mr-2"}),"输出格式"]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[(0,a.jsxs)("label",{className:"flex items-center cursor-pointer bg-white p-2 rounded-lg border border-gray-200 hover:border-primary hover:bg-blue-50 transition-colors",children:[(0,a.jsx)("input",{type:"radio",name:"outputFormat",value:"gif",checked:"gif"===t.outputFormat,onChange:()=>r("outputFormat","gif"),className:"mr-2 accent-primary"}),(0,a.jsx)("i",{className:"fas fa-images text-green-500 mr-2"}),(0,a.jsx)("span",{className:"ml-1",children:"GIF动图"})]}),(0,a.jsxs)("label",{className:"flex items-center cursor-pointer bg-white p-2 rounded-lg border border-gray-200 hover:border-primary hover:bg-blue-50 transition-colors",children:[(0,a.jsx)("input",{type:"radio",name:"outputFormat",value:"livp",checked:"livp"===t.outputFormat,onChange:()=>r("outputFormat","livp"),className:"mr-2 accent-primary"}),(0,a.jsx)("i",{className:"fas fa-camera text-purple-500 mr-2"}),(0,a.jsx)("span",{className:"ml-1",children:"实况照片(LIVP)"})]}),(0,a.jsxs)("label",{className:"flex items-center cursor-pointer bg-white p-2 rounded-lg border border-gray-200 hover:border-primary hover:bg-blue-50 transition-colors",children:[(0,a.jsx)("input",{type:"radio",name:"outputFormat",value:"mp4",checked:"mp4"===t.outputFormat,onChange:()=>r("outputFormat","mp4"),className:"mr-2 accent-primary"}),(0,a.jsx)("i",{className:"fas fa-film text-blue-500 mr-2"}),(0,a.jsx)("span",{className:"ml-1",children:"MP4视频"})]}),(0,a.jsxs)("label",{className:"flex items-center cursor-pointer bg-white p-2 rounded-lg border border-gray-200 hover:border-primary hover:bg-blue-50 transition-colors",children:[(0,a.jsx)("input",{type:"radio",name:"outputFormat",value:"webm",checked:"webm"===t.outputFormat,onChange:()=>r("outputFormat","webm"),className:"mr-2 accent-primary"}),(0,a.jsx)("i",{className:"fas fa-globe text-teal-500 mr-2"}),(0,a.jsx)("span",{className:"ml-1",children:"WebM视频"})]})]})]}),s&&(0,a.jsxs)("div",{className:"border-t border-blue-200 pt-4 mt-4",children:[(0,a.jsxs)("h3",{className:"text-sm font-medium text-gray-700 mb-3 flex items-center",children:[(0,a.jsx)("i",{className:"fas fa-tools text-indigo-500 mr-2"}),"高级设置"]}),"gif"===t.outputFormat&&(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"mb-4 bg-white p-3 rounded-lg border border-gray-200",children:[(0,a.jsxs)("label",{className:"text-sm text-gray-700 flex items-center mb-2",children:[(0,a.jsx)("i",{className:"fas fa-tachometer-alt text-blue-500 mr-2"}),"帧率: ",(0,a.jsx)("span",{className:"font-semibold ml-1 text-primary",children:t.frameRate})," fps"]}),(0,a.jsx)("input",{type:"range",min:"5",max:"30",value:t.frameRate,onChange:e=>r("frameRate",parseInt(e.target.value)),className:"w-full h-2 bg-blue-100 rounded-full appearance-none cursor-pointer",style:{backgroundImage:"linear-gradient(to right, #4f46e5 0%, #4f46e5 ".concat((t.frameRate-5)/25*100,"%, #e2e8f0 ").concat((t.frameRate-5)/25*100,"%, #e2e8f0 100%)")}})]})}),(0,a.jsxs)("div",{className:"mb-4 bg-white p-3 rounded-lg border border-gray-200",children:[(0,a.jsxs)("label",{className:"text-sm text-gray-700 flex items-center mb-2",children:[(0,a.jsx)("i",{className:"fas fa-star text-yellow-500 mr-2"}),"质量: ",(0,a.jsx)("span",{className:"font-semibold ml-1 text-primary",children:t.quality}),"%"]}),(0,a.jsx)("input",{type:"range",min:"50",max:"100",value:t.quality,onChange:e=>r("quality",parseInt(e.target.value)),className:"w-full h-2 bg-blue-100 rounded-full appearance-none cursor-pointer",style:{backgroundImage:"linear-gradient(to right, #4f46e5 0%, #4f46e5 ".concat((t.quality-50)/50*100,"%, #e2e8f0 ").concat((t.quality-50)/50*100,"%, #e2e8f0 100%)")}})]}),("mp4"===t.outputFormat||"webm"===t.outputFormat)&&(0,a.jsxs)("div",{className:"mb-4 bg-white p-3 rounded-lg border border-gray-200",children:[(0,a.jsxs)("label",{className:"text-sm text-gray-700 flex items-center mb-2",children:[(0,a.jsx)("i",{className:"fas fa-expand-arrows-alt text-purple-500 mr-2"}),"分辨率:"]}),(0,a.jsxs)("select",{value:t.resolution||"720p",onChange:e=>r("resolution",e.target.value),className:"w-full p-2 border border-gray-300 rounded-md focus:border-primary focus:ring focus:ring-primary focus:ring-opacity-20 transition-colors",children:[(0,a.jsx)("option",{value:"360p",children:"360p (低清晰度)"}),(0,a.jsx)("option",{value:"480p",children:"480p (标清)"}),(0,a.jsx)("option",{value:"720p",children:"720p (高清 - 推荐)"}),(0,a.jsx)("option",{value:"1080p",children:"1080p (全高清)"}),(0,a.jsx)("option",{value:"1440p",children:"1440p (2K)"}),(0,a.jsx)("option",{value:"2160p",children:"2160p (4K)"}),(0,a.jsxs)("option",{value:"original",children:["原始分辨率 (",i,")"]}),(0,a.jsx)("option",{value:"custom",children:"自定义..."})]}),"custom"===t.resolution&&(0,a.jsxs)("div",{className:"mt-2 grid grid-cols-2 gap-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"text-xs text-gray-600 block mb-1 flex items-center",children:[(0,a.jsx)("i",{className:"fas fa-arrows-alt-h text-blue-400 mr-1"}),"宽度 (像素)"]}),(0,a.jsx)("input",{type:"number",min:"128",max:"3840",step:"16",value:t.customWidth||1280,onChange:e=>r("customWidth",parseInt(e.target.value)),className:"w-full p-1.5 border border-gray-300 rounded-md text-sm focus:border-primary focus:ring focus:ring-primary focus:ring-opacity-20"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"text-xs text-gray-600 block mb-1 flex items-center",children:[(0,a.jsx)("i",{className:"fas fa-arrows-alt-v text-blue-400 mr-1"}),"高度 (像素)"]}),(0,a.jsx)("input",{type:"number",min:"128",max:"2160",step:"16",value:t.customHeight||720,onChange:e=>r("customHeight",parseInt(e.target.value)),className:"w-full p-1.5 border border-gray-300 rounded-md text-sm focus:border-primary focus:ring focus:ring-primary focus:ring-opacity-20"})]})]})]}),(0,a.jsxs)("div",{className:"mb-4 bg-white p-3 rounded-lg border border-gray-200",children:[(0,a.jsxs)("label",{className:"text-sm text-gray-700 flex items-center mb-2",children:[(0,a.jsx)("i",{className:"fas fa-hourglass-start text-green-500 mr-2"}),"起始时间: ",(0,a.jsx)("span",{className:"font-semibold ml-1 text-primary",children:t.startTime}),"秒",n>0&&(0,a.jsxs)("span",{className:"text-xs text-gray-500 ml-1",children:["(视频总长: ",n,"秒)"]})]}),(0,a.jsx)("input",{type:"range",min:"0",max:o,value:t.startTime,onChange:e=>{let s=parseInt(e.target.value);r("startTime",s);let a=n-s;t.duration>a&&r("duration",Math.max(1,a))},className:"w-full h-2 bg-blue-100 rounded-full appearance-none cursor-pointer",style:{backgroundImage:"linear-gradient(to right, #4f46e5 0%, #4f46e5 ".concat(t.startTime/o*100,"%, #e2e8f0 ").concat(t.startTime/o*100,"%, #e2e8f0 100%)")}})]}),(0,a.jsxs)("div",{className:"mb-4 bg-white p-3 rounded-lg border border-gray-200",children:[(0,a.jsxs)("label",{className:"text-sm text-gray-700 flex items-center mb-2",children:[(0,a.jsx)("i",{className:"fas fa-clock text-orange-500 mr-2"}),"持续时间: ",(0,a.jsx)("span",{className:"font-semibold ml-1 text-primary",children:t.duration}),"秒",c<10&&(0,a.jsxs)("span",{className:"text-xs text-gray-500 ml-1",children:["(最大可选: ",c,"秒)"]})]}),(0,a.jsx)("input",{type:"range",min:"1",max:Math.min(10,c),value:t.duration,onChange:e=>r("duration",parseInt(e.target.value)),className:"w-full h-2 bg-blue-100 rounded-full appearance-none cursor-pointer",style:{backgroundImage:"linear-gradient(to right, #4f46e5 0%, #4f46e5 ".concat(t.duration/Math.min(10,c)*100,"%, #e2e8f0 ").concat(t.duration/Math.min(10,c)*100,"%, #e2e8f0 100%)")}})]})]})]})]})}function u(e){let{isConverting:t,onConvert:s,disabled:r,batchMode:l,formatChanged:i}=e;return(0,a.jsx)("div",{className:"mb-6 text-center",children:(0,a.jsx)("button",{onClick:s,disabled:r||t,className:"px-6 py-3 rounded-lg font-medium transition-colors ".concat(r||t?"bg-gray-400 text-gray-200 cursor-not-allowed":i?"bg-yellow-500 hover:bg-yellow-600 text-white":"bg-primary hover:bg-primary-dark text-white"),children:t?(0,a.jsxs)("span",{className:"flex items-center",children:[(0,a.jsx)("i",{className:"fas fa-spinner fa-spin mr-2"}),"处理中..."]}):l?(0,a.jsxs)("span",{className:"flex items-center justify-center",children:[(0,a.jsx)("i",{className:"fas fa-layer-group mr-2"}),"批量转换"]}):i?(0,a.jsxs)("span",{className:"flex items-center justify-center",children:[(0,a.jsx)("i",{className:"fas fa-sync-alt mr-2"}),"格式已更改，点击重新转换"]}):(0,a.jsxs)("span",{className:"flex items-center justify-center",children:[(0,a.jsx)("i",{className:"fas fa-magic mr-2"}),"开始转换"]})})})}function h(e){let{outputFormat:t,resultData:s,onDownload:r}=e,l=(()=>{switch(t){case"gif":return{icon:"fa-image",title:"GIF动图",description:"可在任何支持GIF的平台上使用"};case"livp":return{icon:"fa-photo-video",title:"实况照片(LIVP)",description:"可在支持实况照片的设备上查看，如iPhone、iPad等"};case"mp4":return{icon:"fa-video",title:"MP4视频",description:"兼容性最广泛的视频格式，几乎所有设备都支持"};case"webm":return{icon:"fa-film",title:"WebM视频",description:"开源视频格式，适合网页嵌入和在线分享"};default:return{icon:"fa-file",title:"转换结果",description:"文件已准备就绪"}}})();return(0,a.jsxs)("div",{className:"mt-6",id:"resultContainer",children:[(0,a.jsxs)("h2",{className:"section-title",children:[(0,a.jsx)("i",{className:"fas fa-image"})," 转换结果"]}),(0,a.jsxs)("div",{className:"bg-gray-100 rounded-lg p-4 text-center",children:[(0,a.jsx)("p",{className:"text-green-600 mb-4 font-medium",children:"✨ 转换成功！"}),"gif"===t?(0,a.jsx)("div",{children:(0,a.jsx)("img",{src:"string"==typeof s?s:URL.createObjectURL(s),alt:"Converted GIF",className:"max-w-full rounded-lg my-3"})}):"mp4"===t||"webm"===t?(0,a.jsx)("div",{children:(0,a.jsx)("video",{src:"string"==typeof s?s:URL.createObjectURL(s),controls:!0,className:"max-w-full rounded-lg my-3"})}):(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"bg-gray-200 rounded-lg p-5 text-center text-gray-700",children:[(0,a.jsx)("div",{className:"flex justify-center items-center mb-3",children:(0,a.jsx)("i",{className:"fas ".concat(l.icon," text-3xl text-primary")})}),(0,a.jsxs)("p",{className:"mb-2",children:[l.title,"已准备就绪"]}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"livp"===t?"包含静态图像和动态视频":"文件已优化处理完成"}),(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:["文件大小: ",s?Math.round(s.size/1024):0," KB"]})]}),(0,a.jsxs)("p",{className:"text-xs text-gray-500 mt-2",children:[(0,a.jsx)("i",{className:"fas fa-info-circle mr-1"}),l.description]})]}),(0,a.jsxs)("button",{className:"download-btn",onClick:r,children:[(0,a.jsx)("i",{className:"fas fa-download mr-2"}),(0,a.jsxs)("span",{children:["下载",l.title]})]}),"livp"===t&&(0,a.jsxs)("div",{className:"mt-4 bg-blue-50 border-l-4 border-blue-500 p-3 text-left rounded-r",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-800 mb-2",children:"实况照片(LIVP)使用说明"}),(0,a.jsxs)("div",{className:"text-xs text-red-600 font-medium mb-2",children:[(0,a.jsx)("i",{className:"fas fa-exclamation-circle mr-1"}),"由于Web环境限制，生成的LIVP文件在iOS设备上可能无法正常识别为实况照片。"]}),(0,a.jsx)("h4",{className:"text-xs font-medium text-gray-800 mt-2 mb-1",children:"推荐解决方法："}),(0,a.jsxs)("ol",{className:"text-xs text-gray-700 list-decimal pl-4 space-y-1",children:[(0,a.jsxs)("li",{children:["使用",(0,a.jsx)("a",{href:"https://apps.apple.com/us/app/intolive-live-photo-maker/id1061859052",className:"text-primary hover:underline",target:"_blank",rel:"noopener noreferrer",children:"IntoLive"}),"应用（App Store下载）"]}),(0,a.jsxs)("li",{children:["或使用",(0,a.jsx)("a",{href:"https://apps.apple.com/cn/app/turnlive-live-wallpaper-maker/id1383734598",className:"text-primary hover:underline",target:"_blank",rel:"noopener noreferrer",children:"TurnLive"}),"应用"]}),(0,a.jsx)("li",{children:"这些专业应用能直接在iOS设备上创建真正的Live Photo"})]}),(0,a.jsx)("h4",{className:"text-xs font-medium text-gray-800 mt-2 mb-1",children:"技术说明："}),(0,a.jsx)("p",{className:"text-xs text-gray-600",children:"Live Photo需要特定的iOS系统级元数据和标识符，这些只能通过iOS原生API创建，Web应用无法复制这一过程。为获得最佳体验，请使用iOS设备上的专用应用。"})]})]})]})}function f(e){let{message:t}=e;return(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-xl text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-700",children:t||"处理中..."})]})})}function p(e){let{batchMode:t,onToggle:s}=e;return(0,a.jsxs)("div",{className:"flex items-center justify-end mb-4",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600 mr-2",children:"批量处理模式"}),(0,a.jsx)("button",{onClick:s,className:"relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-1 ".concat(t?"bg-primary":"bg-gray-300"),children:(0,a.jsx)("span",{className:"inline-block h-4 w-4 transform rounded-full bg-white transition-transform ".concat(t?"translate-x-6":"translate-x-1")})})]})}function b(e){let{videos:t,onRemove:s,onSelect:r,selectedIndex:l}=e;return t&&0!==t.length?(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsxs)("h2",{className:"section-title",children:[(0,a.jsx)("i",{className:"fas fa-film"})," 视频列表"]}),(0,a.jsx)("div",{className:"bg-gray-50 rounded-lg p-2 max-h-60 overflow-y-auto",children:(0,a.jsx)("ul",{className:"divide-y divide-gray-200",children:t.map((e,t)=>(0,a.jsxs)("li",{className:"py-2 px-3 flex items-center justify-between cursor-pointer hover:bg-gray-100 rounded ".concat(l===t?"bg-primary-light bg-opacity-30":""),onClick:()=>r(t),children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("i",{className:"fas fa-video text-gray-500 mr-3"}),(0,a.jsxs)("div",{className:"text-sm",children:[(0,a.jsx)("p",{className:"font-medium text-gray-700 truncate max-w-xs",children:e.name}),(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:[(e.size/1048576).toFixed(2)," MB"]})]})]}),(0,a.jsx)("button",{className:"text-red-500 hover:text-red-700",onClick:e=>{e.stopPropagation(),s(t)},children:(0,a.jsx)("i",{className:"fas fa-times"})})]},t))})}),(0,a.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["点击视频可预览，共 ",t.length," 个文件"]})]}):null}function g(e){let{progress:t}=e,{current:s,total:r,fileName:l}=t,i=Math.round(s/r*100),n=t.fileSize?t.fileSize/1048576:0;return(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-xl max-w-md w-full",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"批量处理中..."}),(0,a.jsxs)("div",{className:"mb-2 flex justify-between",children:[(0,a.jsxs)("span",{className:"text-sm text-gray-600",children:["处理中 (",s+1,"/",r,")"]}),(0,a.jsxs)("span",{className:"text-sm font-medium text-gray-700",children:[i,"%"]})]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2.5 mb-4",children:(0,a.jsx)("div",{className:"bg-primary h-2.5 rounded-full transition-all duration-300",style:{width:"".concat(i,"%")}})}),(0,a.jsxs)("p",{className:"text-sm text-gray-700 truncate mb-2",children:["当前文件: ",(0,a.jsx)("span",{className:"font-medium",children:l})]}),n>100&&(0,a.jsxs)("div",{className:"mt-3 text-xs text-yellow-600 bg-yellow-50 p-2 rounded-md",children:[(0,a.jsx)("i",{className:"fas fa-exclamation-circle mr-1"}),"当前处理的是较大文件 (",n.toFixed(1)," MB)，可能需要更长时间。请耐心等待..."]}),(0,a.jsxs)("p",{className:"text-xs text-gray-500 mt-4",children:[(0,a.jsx)("i",{className:"fas fa-info-circle mr-1"}),"处理过程中请勿关闭页面或切换标签页"]})]})})}function j(e){let{results:t,onDownloadAll:s,onClose:r}=e,l=t.filter(e=>e.success).length,i=t.length-l,n=e=>e?e.endsWith(".gif")?{icon:"fa-image",label:"GIF动图"}:e.endsWith(".livp")?{icon:"fa-photo-video",label:"实况照片(LIVP)"}:e.endsWith(".mp4")?{icon:"fa-video",label:"MP4视频"}:e.endsWith(".webm")?{icon:"fa-film",label:"WebM视频"}:{icon:"fa-file",label:"其他格式"}:{icon:"fa-file",label:"未知格式"},o=t.some(e=>e.success&&e.filename&&e.filename.endsWith(".livp"));return(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] flex flex-col",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"批量处理结果"}),(0,a.jsx)("button",{className:"text-gray-500 hover:text-gray-700",onClick:r,children:(0,a.jsx)("i",{className:"fas fa-times"})})]}),(0,a.jsxs)("div",{className:"flex justify-around mb-4 text-center",children:[(0,a.jsxs)("div",{className:"px-4",children:[(0,a.jsx)("p",{className:"text-2xl font-bold text-green-600",children:l}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"成功"})]}),(0,a.jsxs)("div",{className:"px-4",children:[(0,a.jsx)("p",{className:"text-2xl font-bold text-red-600",children:i}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"失败"})]}),(0,a.jsxs)("div",{className:"px-4",children:[(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-600",children:t.length}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"总计"})]})]}),(0,a.jsx)("div",{className:"overflow-y-auto mb-4",style:{maxHeight:"30vh"},children:(0,a.jsx)("ul",{className:"divide-y divide-gray-200",children:t.map((e,t)=>{let s=n(e.filename);return(0,a.jsxs)("li",{className:"py-3 flex items-start",children:[(0,a.jsx)("div",{className:"flex-shrink-0 w-6 h-6 rounded-full flex items-center justify-center mr-3 ".concat(e.success?"bg-green-100 text-green-600":"bg-red-100 text-red-600"),children:(0,a.jsx)("i",{className:"fas ".concat(e.success?"fa-check":"fa-times"," text-xs")})}),(0,a.jsxs)("div",{className:"flex-grow min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("i",{className:"fas ".concat(s.icon," text-gray-500 mr-2")}),(0,a.jsx)("p",{className:"text-sm font-medium text-gray-800 truncate",children:e.fileName})]}),!e.success&&(0,a.jsx)("p",{className:"text-xs text-red-600 mt-1",children:e.error}),e.success&&(0,a.jsxs)("div",{className:"mt-1 flex flex-col",children:[(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:["转换为: ",(0,a.jsx)("span",{className:"font-medium",children:s.label})]}),e.fileSize&&(0,a.jsxs)("p",{className:"text-xs text-gray-400",children:["文件大小: ",Math.round(e.fileSize/1024)," KB"]}),e.resolution&&(0,a.jsxs)("p",{className:"text-xs text-gray-400",children:["分辨率: ",e.resolution]})]})]}),e.success&&(0,a.jsx)("button",{className:"text-primary hover:text-primary-dark text-sm flex-shrink-0",onClick:()=>e.onDownload(),children:(0,a.jsx)("i",{className:"fas fa-download"})})]},t)})})}),(0,a.jsxs)("div",{className:"mt-auto",children:[l>0&&(0,a.jsxs)("div",{className:"flex flex-col space-y-2 mb-4",children:[(0,a.jsxs)("button",{className:"w-full bg-primary text-white py-2 rounded-md hover:bg-primary-dark transition-colors",onClick:s,children:[(0,a.jsx)("i",{className:"fas fa-download mr-2"}),"打包下载全部文件"]}),(0,a.jsxs)("p",{className:"text-xs text-center text-gray-500",children:[(0,a.jsx)("i",{className:"fas fa-info-circle mr-1"}),"打包下载会将所有成功转换的文件合并为一个ZIP压缩包"]})]}),o&&(0,a.jsxs)("div",{className:"bg-blue-50 border-l-4 border-blue-500 p-3 text-left rounded-r",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-800 mb-2",children:"实况照片(LIVP)使用说明"}),(0,a.jsxs)("div",{className:"text-xs text-red-600 font-medium mb-2",children:[(0,a.jsx)("i",{className:"fas fa-exclamation-circle mr-1"}),"由于Web环境限制，生成的LIVP文件在iOS设备上可能无法正常识别为实况照片。"]}),(0,a.jsx)("h4",{className:"text-xs font-medium text-gray-800 mt-2 mb-1",children:"推荐解决方法："}),(0,a.jsxs)("ol",{className:"text-xs text-gray-700 list-decimal pl-4 space-y-1",children:[(0,a.jsxs)("li",{children:["使用",(0,a.jsx)("a",{href:"https://apps.apple.com/us/app/intolive-live-photo-maker/id1061859052",className:"text-primary hover:underline",target:"_blank",rel:"noopener noreferrer",children:"IntoLive"}),"应用（App Store下载）"]}),(0,a.jsxs)("li",{children:["或使用",(0,a.jsx)("a",{href:"https://apps.apple.com/cn/app/turnlive-live-wallpaper-maker/id1383734598",className:"text-primary hover:underline",target:"_blank",rel:"noopener noreferrer",children:"TurnLive"}),"应用"]}),(0,a.jsx)("li",{children:"这些专业应用能直接在iOS设备上创建真正的Live Photo"})]}),(0,a.jsx)("h4",{className:"text-xs font-medium text-gray-800 mt-2 mb-1",children:"技术说明："}),(0,a.jsx)("p",{className:"text-xs text-gray-600",children:"Live Photo需要特定的iOS系统级元数据和标识符，这些只能通过iOS原生API创建，Web应用无法复制这一过程。为获得最佳体验，请使用iOS设备上的专用应用。"})]})]})]})})}var y=s(5152),v=s.n(y);function N(e){let{message:t,onClose:s}=e,[l,i]=(0,r.useState)(!0);return((0,r.useEffect)(()=>{let e=setTimeout(()=>{i(!1),s&&s()},5e3);return()=>clearTimeout(e)},[s]),l)?(0,a.jsx)("div",{className:"fixed top-4 right-4 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded shadow-md z-50 max-w-md",children:(0,a.jsxs)("div",{className:"flex items-start",children:[(0,a.jsx)("div",{className:"py-1",children:(0,a.jsx)("i",{className:"fas fa-exclamation-circle mr-2"})}),(0,a.jsx)("div",{children:(0,a.jsx)("p",{children:t})}),(0,a.jsx)("div",{className:"ml-auto",children:(0,a.jsx)("button",{className:"text-red-700 hover:text-red-900",onClick:()=>{i(!1),s&&s()},children:(0,a.jsx)("i",{className:"fas fa-times"})})})]})}):null}let w=async e=>{try{let t=new(await s.e(733).then(s.t.bind(s,5733,23))).default;return e.forEach(e=>{e.data&&t.file(e.name,e.data)}),await t.generateAsync({type:"blob",compression:"DEFLATE",compressionOptions:{level:6}})}catch(e){throw console.error("创建 ZIP 文件失败:",e),Error("创建 ZIP 文件失败")}},k=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"converted_files.zip",s=URL.createObjectURL(e),a=document.createElement("a");a.href=s,a.download=t,document.body.appendChild(a),a.click(),document.body.removeChild(a),setTimeout(()=>{URL.revokeObjectURL(s)},100)};var L=s(5577);let M=v()(()=>s.e(344).then(s.bind(s,5344)),{loadableGenerated:{webpack:()=>[5344]},ssr:!1}),_={convertToGif:null,convertToLivp:null,convertToMp4:null,convertToWebm:null,createDownloadLink:null,forceReleaseMemory:null,recoverFromError:null};function T(){let[e,t]=(0,r.useState)(null),[l,m]=(0,r.useState)([]),[y,v]=(0,r.useState)(0),[T,F]=(0,r.useState)(""),[I,P]=(0,r.useState)(!1),[R,C]=(0,r.useState)(!1),[S,O]=(0,r.useState)(!1),[W,E]=(0,r.useState)(null),[U,D]=(0,r.useState)(""),[G,V]=(0,r.useState)(!1),[z,A]=(0,r.useState)({outputFormat:"gif",frameRate:10,quality:80,startTime:0,duration:3,resolution:"720p"}),[B,H]=(0,r.useState)(null),[Z,q]=(0,r.useState)(!1),[K,X]=(0,r.useState)({current:0,total:0,fileName:"",fileSize:0}),[Y,J]=(0,r.useState)(!1),[Q,$]=(0,r.useState)([]),[ee,et]=(0,r.useState)(!1),[es,ea]=(0,r.useState)(!1);(0,r.useEffect)(()=>{(async()=>{try{let e=await s.e(381).then(s.bind(s,381));_.convertToGif=e.convertToGif,_.convertToLivp=e.convertToLivp,_.convertToMp4=e.convertToMp4,_.convertToWebm=e.convertToWebm,_.createDownloadLink=e.createDownloadLink,_.forceReleaseMemory=e.forceReleaseMemory,_.recoverFromError=e.recoverFromError,V(!0)}catch(e){console.error("加载视频转换工具失败:",e)}})()},[]),(0,r.useEffect)(()=>()=>{T&&T.startsWith("blob:")&&URL.revokeObjectURL(T),"string"==typeof W&&W.startsWith("blob:")&&URL.revokeObjectURL(W)},[T,W]);let er=e=>{if(!e)return"未知";let t=e.videoWidth,s=e.videoHeight;return t&&s?s<=360?"360p":s<=480?"480p":s<=720?"720p":s<=1080?"1080p":s<=1440?"1440p":s<=2160?"2160p":"".concat(t,"x").concat(s):"未知"},el=e=>{if(e>=0&&e<l.length){v(e),t(l[e]),T&&URL.revokeObjectURL(T);let s=URL.createObjectURL(l[e]);F(s);let a=document.createElement("video");a.onloadedmetadata=()=>{let e=er(a),t=Math.floor(a.duration);A(s=>({...s,originalResolution:e,videoDuration:t,startTime:s.startTime>=t?0:s.startTime,duration:Math.min(s.duration,Math.max(1,t-s.startTime))}))},a.src=s}},ei=async()=>{if(e&&G){W&&("string"==typeof W&&W.startsWith("blob:")&&URL.revokeObjectURL(W),E(null),O(!1)),C(!0),D("正在加载 FFmpeg...");try{let t;switch(z.outputFormat){case"gif":D("正在转换为 GIF..."),t=await _.convertToGif(e,z);break;case"livp":D("正在创建实况照片..."),t=await _.convertToLivp(e,z);break;case"mp4":if(D("正在优化 MP4 视频..."),!_.convertToMp4)throw Error("MP4转换功能尚未加载完成，请稍后再试");t=await _.convertToMp4(e,z);break;case"webm":if(D("正在转换为 WebM..."),!_.convertToWebm)throw Error("WebM转换功能尚未加载完成，请稍后再试");t=await _.convertToWebm(e,z);break;default:throw Error("不支持的输出格式")}E(t),O(!0),setTimeout(()=>{var e;null===(e=document.getElementById("resultContainer"))||void 0===e||e.scrollIntoView({behavior:"smooth"})},100)}catch(t){console.error("转换失败:",t),D("正在尝试恢复...");let e=!1;try{_.recoverFromError&&(e=await _.recoverFromError())}catch(e){console.error("恢复失败:",e)}e?H("转换失败，已尝试恢复。请再次尝试转换或选择其他格式。"):H("转换失败: "+(t.message||"请检查浏览器兼容性"));try{_.forceReleaseMemory&&await _.forceReleaseMemory()}catch(e){console.error("内存释放失败:",e)}}finally{C(!1),D("")}}},en=async()=>{if(!G||0===l.length)return;J(!0),X({current:0,total:l.length,fileName:l[0].name,fileSize:l[0].size});let e=[];for(let t=0;t<l.length;t++){let s=l[t];X({current:t,total:l.length,fileName:s.name,fileSize:s.size});try{let a,r;if(t>0)try{await _.forceReleaseMemory(),await new Promise(e=>setTimeout(e,500))}catch(e){console.warn("内存释放失败，继续处理:",e)}if(!s.type.startsWith("video/"))throw Error("不是有效的视频文件");let l="";switch(z.outputFormat){case"gif":if(!_.convertToGif)throw Error("GIF转换功能尚未加载完成");a=await _.convertToGif(s,z),r="gif";break;case"livp":if(!_.convertToLivp)throw Error("LIVP转换功能尚未加载完成");a=await _.convertToLivp(s,z),r="livp";break;case"mp4":if(!_.convertToMp4)throw Error("MP4转换功能尚未加载完成");a=await _.convertToMp4(s,z),r="mp4",l="custom"===z.resolution?"".concat(z.customWidth||1280,"x").concat(z.customHeight||720):"original"===z.resolution?"原始分辨率":z.resolution;break;case"webm":if(!_.convertToWebm)throw Error("WebM转换功能尚未加载完成");a=await _.convertToWebm(s,z),r="webm",l="custom"===z.resolution?"".concat(z.customWidth||1280,"x").concat(z.customHeight||720):"original"===z.resolution?"原始分辨率":z.resolution;break;default:throw Error("不支持的输出格式")}let i="".concat(s.name.split(".")[0],".").concat(r);e.push({fileName:s.name,success:!0,result:a,filename:i,fileSize:a.size,resolution:l,onDownload:()=>{let{link:e}=_.createDownloadLink(a,i);document.body.appendChild(e),e.click(),document.body.removeChild(e)}})}catch(t){console.error("处理文件 ".concat(s.name," 失败:"),t);try{_.recoverFromError&&await _.recoverFromError()}catch(e){console.warn("恢复失败:",e)}e.push({fileName:s.name,success:!1,error:t.message||"转换失败"})}}$(e),J(!1),et(!0)},eo=async()=>{let e=Q.filter(e=>e.success);if(0!==e.length){D("正在准备下载文件..."),C(!0);try{let t=await Promise.all(e.map(async e=>{let t;if("string"==typeof e.result&&e.result.startsWith("blob:")){let s=await fetch(e.result);t=await s.blob()}else t=e.result;return{name:e.filename,data:t}})),s=await w(t),a=new Date().toISOString().slice(0,10),r=z.outputFormat.toUpperCase();k(s,"视频转换宝_".concat(r,"_").concat(a,".zip"))}catch(e){console.error("打包下载失败:",e),H("打包下载失败: "+(e.message||"请稍后再试"))}finally{C(!1),D("")}}};return(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-b from-blue-50 to-purple-50 flex flex-col w-full",children:[(0,a.jsxs)(i(),{children:[(0,a.jsx)("title",{children:"视频转换宝 | 免费的视频转GIF动图、实况照片(LIVP)工具 - MOV/MP4转GIF/LIVP"}),(0,a.jsx)("meta",{name:"description",content:"轻松将视频转换为实况照片(LIVP)、GIF动图、MP4或WebM格式。完全免费，无水印，支持批量转换，所有处理在本地完成，保护您的隐私。"}),(0,a.jsx)("meta",{name:"keywords",content:"视频转换,LIVP转换,GIF制作,在线视频工具,MP4转GIF,视频转LIVP,批量转换,免费视频转换,无水印"}),(0,a.jsx)("link",{rel:"canonical",href:"https://livecapture.toolooz.com"}),(0,a.jsx)("meta",{property:"og:title",content:"视频转换宝 | 免费的视频转GIF动图、实况照片(LIVP)工具"}),(0,a.jsx)("meta",{property:"og:description",content:"轻松将视频转换为实况照片(LIVP)、GIF动图、MP4或WebM格式。完全免费，无水印，所有处理在本地完成。"}),(0,a.jsx)("meta",{property:"og:image",content:"https://livecapture.toolooz.com/og-image.png"}),(0,a.jsx)("meta",{property:"og:url",content:"https://livecapture.toolooz.com"}),(0,a.jsx)("meta",{name:"twitter:title",content:"视频转换宝 | 免费的视频转GIF动图、实况照片(LIVP)工具"}),(0,a.jsx)("meta",{name:"twitter:description",content:"轻松将视频转换为实况照片(LIVP)、GIF动图等多种格式。完全免费，无水印。"}),(0,a.jsx)("meta",{name:"twitter:image",content:"https://livecapture.toolooz.com/og-image.png"})]}),R&&(0,a.jsx)(f,{message:U}),Y&&(0,a.jsx)(g,{progress:K}),ee&&(0,a.jsx)(j,{results:Q,onDownloadAll:eo,onClose:()=>et(!1)}),(0,a.jsx)(L.Z,{}),(0,a.jsxs)("div",{className:"container max-w-3xl mx-auto py-5 px-4 flex-grow",children:[(0,a.jsx)(n,{}),(0,a.jsxs)("main",{className:"bg-white rounded-xl shadow-lg p-6 mb-8",children:[(0,a.jsx)(p,{batchMode:Z,onToggle:()=>{q(!Z),Z&&l.length>0&&(v(0),t(l[0]),T&&T.startsWith("blob:")&&URL.revokeObjectURL(T),F(URL.createObjectURL(l[0])))}}),(0,a.jsx)(c,{onFileUpload:e=>{if(Array.isArray(e)){let s=e.filter(e=>e.type.startsWith("video/"));if(s.length>0){m(s),v(0),t(s[0]);let e=URL.createObjectURL(s[0]);F(e),O(!1),E(null),q(!0);let a=document.createElement("video");a.onloadedmetadata=()=>{let e=er(a),t=Math.floor(a.duration);A(s=>({...s,originalResolution:e,videoDuration:t,startTime:s.startTime>=t?0:s.startTime,duration:Math.min(s.duration,Math.max(1,t-s.startTime))}))},a.src=e}}else if(e){if(!e.type.startsWith("video/")){H("请上传视频文件");return}t(e),m([e]),v(0);let s=URL.createObjectURL(e);F(s),O(!1),E(null);let a=document.createElement("video");a.onloadedmetadata=()=>{let e=er(a),t=Math.floor(a.duration);A(s=>({...s,originalResolution:e,videoDuration:t,startTime:s.startTime>=t?0:s.startTime,duration:Math.min(s.duration,Math.max(1,t-s.startTime))}))},a.src=s}},multiple:Z}),Z&&l.length>0&&(0,a.jsx)(b,{videos:l,onRemove:e=>{let s=[...l];if(s.splice(e,1),0===s.length){m([]),t(null),F(""),O(!1),E(null);return}if(m(s),e===y){let a=e>=s.length?s.length-1:e;v(a),t(s[a]),T&&T.startsWith("blob:")&&URL.revokeObjectURL(T),F(URL.createObjectURL(s[a])),O(!1),E(null)}else e<y&&v(y-1)},onSelect:el,selectedIndex:y}),T&&(0,a.jsx)(d,{url:T,file:e,onSelectFile:el,selectedFileIndex:y,batchMode:Z,videoFiles:l,videoDuration:z.videoDuration}),(0,a.jsx)(x,{settings:z,showAdvanced:I,onSettingChange:(e,t)=>{A(s=>({...s,[e]:t})),"outputFormat"===e&&S&&("string"==typeof W&&W.startsWith("blob:")&&URL.revokeObjectURL(W),E(null),O(!1))},onToggleAdvanced:()=>P(!I)}),(0,a.jsx)(u,{isConverting:R||Y,onConvert:()=>{ea(!1),Z&&l.length>1?en():ei()},disabled:!T||!G,batchMode:Z&&l.length>1,formatChanged:es&&S}),(0,a.jsx)(M,{}),S&&!Z&&(0,a.jsx)(h,{outputFormat:z.outputFormat,resultData:W,onDownload:()=>{let t;if(!W||!G)return;switch(z.outputFormat){case"gif":default:t="gif";break;case"livp":t="livp";break;case"mp4":t="mp4";break;case"webm":t="webm"}let s="".concat(e.name.split(".")[0],".").concat(t),{link:a}=_.createDownloadLink(W,s);document.body.appendChild(a),a.click(),document.body.removeChild(a)}})]})]}),(0,a.jsx)(o.Z,{}),B&&(0,a.jsx)(N,{message:"转换失败: ".concat(B),onClose:()=>H(null)})]})}},5152:function(e,t,s){e.exports=s(2602)}},function(e){e.O(0,[247,888,774,179],function(){return e(e.s=5557)}),_N_E=e.O()}]);